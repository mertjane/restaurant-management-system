<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Restaurant Dashboard</title>
    <link rel="stylesheet" href="/frontend/css/style.css" />
    <style>
      body {
        display: none; /* Hide the page initially */
      }
    </style>
  </head>
  <body>
    <div class="dashboard-container">
      <header class="site-header">
        <div class="svg-wrapper" id="toggleSidebar">
          <svg
            viewBox="0 0 24 24"
            width="40px"
            height="40px"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
            <g
              id="SVGRepo_tracerCarrier"
              stroke-linecap="round"
              stroke-linejoin="round"
            ></g>
            <g id="SVGRepo_iconCarrier">
              <path
                d="M4 12H20M4 8H20M4 16H12"
                stroke="#fff"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              ></path>
            </g>
          </svg>
        </div>
        <ul>
          <li title="Notification" id="notif-toggle">
            <svg
              viewBox="0 0 24 24"
              fill="none"
              width="25px"
              height="25px"
              style="position: relative; top: 3px; margin-right: 2em"
              xmlns="http://www.w3.org/2000/svg"
            >
              <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
              <g
                id="SVGRepo_tracerCarrier"
                stroke-linecap="round"
                stroke-linejoin="round"
              ></g>
              <g id="SVGRepo_iconCarrier">
                <g id="style=linear">
                  <g id="notification-bell-new">
                    <path
                      id="vector"
                      d="M14.7356 19.5801C14.7356 19.8834 14.658 20.1838 14.5073 20.4641C14.3565 20.7444 14.1356 20.9991 13.857 21.2136C13.5785 21.4281 13.2478 21.5983 12.8839 21.7144C12.52 21.8304 12.1299 21.8902 11.736 21.8902C11.3421 21.8902 10.9521 21.8304 10.5881 21.7144C10.2242 21.5983 9.89354 21.4281 9.61501 21.2136C9.33647 20.9991 9.11552 20.7444 8.96478 20.4641C8.81404 20.1838 8.73645 19.8834 8.73645 19.5801"
                      stroke="#333"
                      stroke-width="1.5"
                      stroke-linecap="round"
                    ></path>
                    <path
                      id="vector_2"
                      d="M18.7917 10.9112C18.8915 11.7454 19.1223 12.5607 19.4774 13.3265L19.7421 13.8972C20.7516 16.0741 19.4369 18.6186 17.0773 19.0547L16.9171 19.0843C13.4921 19.7174 9.98001 19.7174 6.55497 19.0843C4.17606 18.6446 2.91751 16.0127 4.06867 13.885L4.29508 13.4665C4.91326 12.3239 5.23697 11.0453 5.23697 9.74614L5.23697 8.42485C5.23697 6.20106 6.49561 4.16885 8.48651 3.1781C10.2177 2.3166 12.1995 2.15641 14.0267 2.70339"
                      stroke="#333"
                      stroke-width="1.5"
                      stroke-linecap="round"
                    ></path>
                    <circle
                      id="vector_3"
                      cx="17.8599"
                      cy="6.03711"
                      r="2.5"
                      stroke="#EE4B2B"
                      stroke-width="5"
                    ></circle>
                  </g>
                </g>
              </g>
            </svg>
          </li>
          <li id="toggleDropdown" title="Profile">
            <a href="#" id="profile-btn">
              <svg
                viewBox="0 0 16 16"
                xmlns="http://www.w3.org/2000/svg"
                fill="#000000"
                width="30px"
                height="30px"
                class="avatar"
              >
                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                <g
                  id="SVGRepo_tracerCarrier"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                ></g>
                <g id="SVGRepo_iconCarrier">
                  <path
                    d="m 8 1 c -1.65625 0 -3 1.34375 -3 3 s 1.34375 3 3 3 s 3 -1.34375 3 -3 s -1.34375 -3 -3 -3 z m -1.5 7 c -2.492188 0 -4.5 2.007812 -4.5 4.5 v 0.5 c 0 1.109375 0.890625 2 2 2 h 8 c 1.109375 0 2 -0.890625 2 -2 v -0.5 c 0 -2.492188 -2.007812 -4.5 -4.5 -4.5 z m 0 0"
                    fill="#888"
                  ></path>
                </g>
              </svg>
            </a>
          </li>
          <!-- Account Dropdown -->
          <ul class="dropdown" id="dropdown">
            <div class="dialog-arrow"></div>
            <header class="profile-header">
              <h4>Profile</h4>
            </header>
            <li>
              <a href="#" title="Account Settings">Account Settings</a>
            </li>
            <li id="logout">
              <a href="#">Logout</a>
            </li>
          </ul>
        </ul>

        <!-- Notification Dropdown -->
        <ul class="notif-dropdown" id="notif-dropdown">
          <div class="dialog-arrow"></div>
          <header class="notif-header">
            <h4>Notifications</h4>
          </header>
          <li class="active">
            <a href="#">Booking request from Rodrigez</a>
          </li>
          <li class="active">
            <a href="#">Booking request from Marcela</a>
          </li>
          <li>
            <a href="#">Booking request from Andy</a>
          </li>
          <li>
            <a href="#">Booking request from Cloe</a>
          </li>
          <li>
            <a href="#">Booking request from Jin Ku</a>
          </li>
          <footer class="notif-footer">
            <a href="#">View all</a>
          </footer>
        </ul>
      </header>
      <aside class="sidebar active">
        <nav>
          <h3>Management System</h3>
          <ul>
            <li>
              <a href="#" title="Dashboard">Dashboard</a>
            </li>
            <li>
              <a href="#" title="Orders">Orders</a>
            </li>
            <li>
              <a href="#" title="Menu">Menu</a>
            </li>
            <li>
              <a href="#" title="Bookings">Bookings</a>
            </li>
            <li>
              <a href="#" title="Customers">Customers</a>
            </li>
            <li>
              <a href="#" title="Reports">Reports</a>
            </li>
            <li>
              <a href="#" title="Settings">Settings</a>
            </li>
          </ul>
        </nav>
      </aside>
      <main class="main-content">
        <article>
          <h2>Dashboard</h2>
          <p>Welcome to the Restaurant Management System</p>
        </article>
      </main>
      <footer class="site-footer">
        <p>&copy; 2025 Restaurant Management System</p>
      </footer>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const client = JSON.parse(sessionStorage.getItem("client"));

        // If no client is found, redirect to auth.html
        if (!client || !client.isLoggedin) {
          window.location.href = "auth.html";
        } else {
          document.body.style.display = "block"; // Show page only if logged in
        }

        // dropdown toggle
        const openDropdown = document.getElementById("toggleDropdown");
        const notifDropdown = document.getElementById("notif-toggle");
        const notif = document.getElementById("notif-dropdown");
        const dropdown = document.getElementById("dropdown");

        notifDropdown.addEventListener("click", function () {
          event.stopPropagation(); // Prevent click from propagating to document
          notif.classList.toggle("active");
        });

        openDropdown.addEventListener("click", function () {
          event.stopPropagation(); // Prevent click from propagating to document
          dropdown.classList.toggle("active");
        });

        document.addEventListener("click", function (event) {
          if (
            !notif.contains(event.target) &&
            !notifDropdown.contains(event.target)
          ) {
            notif.classList.remove("active");
          }
        });

        // Close dropdown when clicking outside
        document.addEventListener("click", function (event) {
          if (
            !dropdown.contains(event.target) &&
            !openDropdown.contains(event.target)
          ) {
            dropdown.classList.remove("active");
          }
        });

        // Sidebar toggle
        document
          .getElementById("toggleSidebar")
          .addEventListener("click", function () {
            document.querySelector(".sidebar").classList.toggle("active");
            document.querySelector(".site-header").classList.toggle("active");
            document.querySelector(".main-content").classList.toggle("active");
          });

        // Logout function
        document
          .getElementById("logout")
          .addEventListener("click", function () {
            sessionStorage.removeItem("client"); // Clear stored login data
            window.location.href = "auth.html"; // Redirect to login
          });
      });
    </script>
  </body>
</html>

<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Reset Password</title>
    <link rel="stylesheet" href="/css/style.css" />
  </head>
  <body>
    <form id="reset-form">
      <h2>Reset Password</h2>
      <input type="hidden" id="token" name="token" th:value="${token}" />

      <label for="newPassword">New Password</label>
      <input
        type="password"
        id="newPassword"
        name="newPassword"
        required
        placeholder="Enter your new password"
      />
      <label for="confirmPassword">Confirm Password</label>
      <input
        type="password"
        id="confirmPassword"
        name="confirmPassword"
        required
        placeholder="Confirm your new password"
      />

      <button type="submit">Reset Password</button>
    </form>
    <footer class="site-footer">
      <p>&copy; 2025 Restaurant Management System</p>
    </footer>
  </body>
  <script>
    document
      .getElementById("reset-form")
      .addEventListener("submit", function (e) {
        e.preventDefault();

        const token = document.getElementById("token").value;
        const newPassword = document.getElementById("newPassword").value;
        const confirmPassword =
          document.getElementById("confirmPassword").value;

        fetch(`/auth/reset-password?token=${token}`, {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify({ newPassword, confirmPassword }),
        })
          .then((res) => res.text())
          .then((data) => console.log(data))
          .catch((err) => console.log("Error: ", err.message));
      });
  </script>
</html>
